** LORIA/SYNALP EmotionML Implementation

This README is temporary... (comments need to be double checked)

Todo:
	- improve exceptions handling (with embedded exceptions)
			
Restrictions
	- 1 single text node for emotions
	- no JSON export for emotions with text
	
	
** COMMENTS about EmotionML specifications

In the following document:
- "specification" refers to the document at http://www.w3.org/TR/2013/PR-emotionml-20130416/ (version of 16 April 2013)
- "assertions" refers to the list of assertions at http://www.w3.org/2002/mmi/2013/emotionml-ir/#test_class
- "schema" refers to the schema http://www.w3.org/TR/emotionml/emotionml.xsd and http://www.w3.org/TR/emotionml/emotionml-fragments.xsd


* Specification clarification questions
- About relative and absolute timing ?
	- Is that possible to mix relative and absolute timing ? Intuitively this would seem weird but nothing in the 
	specification prevents it. (SCHEMA CHECK)

- About consistency of start/end/duration ? 
	- I think the specification does not enforce the consistency of start, end and duration which are
	possible alltogether. Hence it is possible to have inconsistent triplets (start=0, end=5, duration=10).
	
- About text nodes ?
	- the emotion element can have text nodes children, it is not specified how many. Is it possible to intersperse text nodes all over
	an emotion element ? The fact that an emotion element can have text children is not specified in its children list. (SCHEMA CHECK)
	
- About emotion children combinations ?
	- the specification states "There are no constraints on the combinations of children that are allowed." which is not exactly true since
	an emotion cannot contain two categories that belong to different category-sets or two categories with the same name.	
	
- About default values ?
	- some attributes have default values (reference role, time ref anchor point, duration, etc.), is it desirable to have a default 
	value also for other attributes, especially for the "value" attribute ? For instance, how would you compare <category name="surprise"/> 
	and <category name="surprise" value="1.0"/> ? Are they semantically equivalent ? A similar question could be made about the "confidence"
	attribute, how would you compare <category name="surprise"/> and <category name="surprise" confidence="1.0"/> ? (SCHEMA CHECK)
	
- About the number of <trace> ? 
	- the specification does not state clearly if it is possible to have several <trace> elements inside a descriptor, it is stated
	"a <trace> element". Maybe it should be stated "If present the following child element can occur one or more time: <trace>" like the <info>
	element for the <emotion> element. The schema allows that. If this comment is accepted, the assertions 215, 224, 235, 245 should also 
	be clarified.	
	
- About conformance ?
	- In section 4.3, it is stated "It is the responsibility of an EmotionML processor to verify that the use of descriptor names and values 
	is consistent with the vocabulary definition", which is true but incomplete with regards to the assertions, 
	maybe it would be beneficial to specify all the assertions that are not under the schema responsability but rather the EmotionML processor
	(see below).
	


* Discrepancies between schema/assertions/specification
- Assertions not tested by the schema
	- I found that the following assertions are not tested by the schema : 114, 117, 120, 123, 161, 164, 167, 170, 172, 210, 212, 
	216, 220, 222, 224, 230, 232, 236, 240, 242, 246, 410, 417.
	
	There are assertions that are impossible to test with a XSD schema I think:
		114, 117, 120, 123, 161, 164, 167, 170 : vocabulary set id and type checking
		212, 222, 232, 242 : vocabulary name membership
		417 : media type
	
	Some may be possible with some tweaking:
		210, 220, 230, 240 : vocabulary set presence
		216, 224, 236, 246 : <trace> and "value"
		
	There are two "true" errors I think:
		172 : The "version" attribute of <emotion>, if present, MUST have the  value "1.0"
			I think it should not be "optional with default value 1.0" but rather "optional with fixed value 1.0"
		410 : The <reference> element MUST contain a "uri" attribute
			the "uri" attribute is optional by default in the schema

- 2.4.1, "The end value MUST be greater than or equal to the start value", 
	- the schema does not check it (SCHEMA CHECK)
	- there is no assertion enforcing it

- 2.1.2, "a typical use case is expected to be embedding an <emotion> into some other markup", 
	- there is no assertion that describe that <emotion> may be embedded in another markup, does it imply we could embed other elements ? (SCHEMA CHECK)

- assertions 105, 155, 601, 606, status "Req=N"
	- the assertions mix the presence of <info> and the number of <info> elements, while the presence is not restricted, the number 
	MUST be 0 or 1, hence the required status wrt this part of assertions should be "Req=Y" (SCHEMA CHECK)

- 2.1.2, "There are no constraints on the order in which children occur"
	- the schema does actually restrict the order of elements, <info> needs to be first, then the descriptors, then the references (SCHEMA CHECK)
 	
	
	
* Invalid documents
- http://www.w3.org/TR/emotion-voc/xml does not comply with assertion 110 (hence all examples that refer to vocabularies there also fail)

- 5.1.1 Annotation of Text, "Annotation of text" Lewis Caroll example and the "Annotation of static images" example :
	- In the <meta:doc> element, the character & is found, which does not pass XML validation, it should be &amp;

- 2.3.3 The <info> element
	- The last example of this section does not comply with assertion 212 since the name "neutral" does not belong to every-day categories


